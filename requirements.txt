C'est noté. Passer sur une stack **Next.js / Vercel** est excellent pour avoir une UI moderne, responsive et facilement partageable via un lien, tout en gardant le traitement des données sécurisé (côté client).

Voici le setup adapté pour **Claude Code**.

### 1\. Définition de l'App (Pour Claude)

  * **Nom du projet :** `be-tax-opt-mvp`
  * **Stack Technique :**
      * **Framework :** Next.js 14+ (App Router).
      * **Langage :** TypeScript (indispensable pour la précision financière).
      * **Styling :** Tailwind CSS + `shadcn/ui` (pour des composants propres et rapides).
      * **Parsing CSV :** `papaparse` (librairie robuste pour traiter les CSV côté navigateur).
      * **State Management :** React Hooks / Zustand (simple et efficace).
  * **Architecture Privacy :** "Client-Side Processing". L'app est hébergée sur Vercel, mais les CSV sont traités dans le navigateur de l'utilisateur. Aucune donnée financière n'est envoyée vers une base de données serveur (argument de vente majeur pour ton client).

### 2\. Fonctionnalités à implémenter (Backlog pour Claude)

  * **Zone de Drop (Upload) :** Une zone drag & drop qui accepte plusieurs fichiers CSV simultanément (ex: "Keytrade.csv" + "Bolero.csv").
  * **Mapper Intelligent :** Une interface qui demande à l'utilisateur de confirmer quelles colonnes correspondent aux données clés (Date, ISIN, Sens [Achat/Vente], Quantité, Prix, Frais).
  * **Dashboard Fiscal (Vue principale) :**
      * **Card 1 :** Total Plus-Values Brutes.
      * **Card 2 :** Total Moins-Values Brutes.
      * **Card 3 :** Résultat Net (P\&L).
      * **Card 4 :** Montant Imposable (Résultat Net - 10.000 €).
      * **Card 5 :** Impôt Estimé (Montant Imposable \* Taux modifiable).
  * **Tableau Détail :** Liste des transactions avec filtre et tri, montrant le P\&L par ligne.

-----

### 3\. Fichier `CONTEXT.md` pour Claude Code

Crée ce fichier à la racine du projet pour que Claude comprenne exactement la logique métier belge.

```markdown
# CONTEXTE DU PROJET : MVP FISCALITÉ BELGE (NEXT.JS)

## 1. Contexte Métier & Problème
En Belgique, une nouvelle taxe sur les plus-values (PV) boursières entre en vigueur.
Les banques proposent souvent un prélèvement libératoire "transaction par transaction" (désavantageux car ne déduit pas les pertes).
Les investisseurs fortunés choisissent l'option "Opt-out" pour déclarer eux-mêmes et bénéficier :
1. De la déduction des Moins-Values (MV).
2. D'un seuil d'exonération de 10.000 € sur les gains nets.

## 2. Objectif Technique
Développer une Single Page Application (SPA) avec **Next.js** déployable sur **Vercel**.
**IMPORTANT - PRIVACY FIRST :** Le traitement des fichiers CSV doit se faire **côté client (Browser)**. Aucune donnée financière ne doit être stockée sur un serveur ou une DB pour ce MVP.

## 3. Logique de Calcul (Business Logic)
L'application doit consolider plusieurs portefeuilles (fichiers CSV différents) pour donner une vue fiscale globale.

### Formules :
1.  **P&L Transaction :** `(Prix Vente * Qté - Frais Vente) - (Prix Achat Moyen * Qté + Frais Achat)`
2.  **Global Net :** `Somme(toutes les Plus-Values)` - `Somme(toutes les Moins-Values)`
3.  **Assiette Imposable :**
    * Si `Global Net` <= 10.000 € : Assiette = 0 €.
    * Si `Global Net` > 10.000 € : Assiette = `Global Net` - 10.000 €.
4.  **Impôt dû :** `Assiette Imposable` * `Taux` (Taux par défaut = 15%, mais doit être un input modifiable par l'utilisateur).

## 4. Instructions UI/UX
* Utiliser **Tailwind CSS** et **Shadcn UI** pour un look professionnel "Fintech".
* Interface sobre, chiffres clairs.
* Prévoir une fonction d'export PDF ou CSV du rapport final pour aider au remplissage de la déclaration fiscale.
* Gérer les erreurs de parsing CSV (colonnes manquantes) proprement.
```

### 4\. Prompt de démarrage pour Claude

Voici la commande à donner à Claude une fois le fichier `CONTEXT.md` créé :

> "Je veux créer un MVP Next.js en suivant les instructions du fichier `CONTEXT.md`. Commence par initialiser le projet avec Next.js, TypeScript et Tailwind, puis installe `lucide-react`, `recharts` (pour les graphiques) et `papaparse`. Ensuite, propose-moi la structure des composants."

**Veux-tu que je détaille la structure des colonnes CSV "standards" pour aider le mapper, ou on laisse Claude deviner ?**